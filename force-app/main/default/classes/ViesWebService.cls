//Generated by wsdl2apex

public class ViesWebService {
    public class checkVatPort {
        public String endpoint_x = 'http://ec.europa.eu/taxation_customs/vies/services/checkVatService';
        public Map<String,String> inputHttpHeaders_x;
        public Map<String,String> outputHttpHeaders_x;
        public String clientCertName_x;
        public String clientCert_x;
        public String clientCertPasswd_x;
        public Integer timeout_x;
        private String[] ns_map_type_info = new String[]{'urn:ec.europa.eu:taxud:vies:services:checkVat:types', 'ViesWebService', 'urn:ec.europa.eu:taxud:vies:services:checkVat', 'ViesWebService'};
        public ViesWebService.checkVatResponse_element checkVat(String countryCode,String vatNumber) {
            ViesWebService.checkVat_element request_x = new ViesWebService.checkVat_element();
            ViesWebService.checkVatResponse_element response_x;
            request_x.countryCode = countryCode;
            request_x.vatNumber = vatNumber;
            Map<String, ViesWebService.checkVatResponse_element> response_map_x = new Map<String, ViesWebService.checkVatResponse_element>();
            response_map_x.put('response_x', response_x);

		    // Added to provide test coverage - MPK
		    // GB 123456789 = valid
		    // GB 000000000 = invalid
		    // XX anything = throw 'INVALID_INPUT'
		    // Other = throw 'SERVICE_UNAVAILABLE'
            if(Test.isRunningTest())
            {	
            	response_x = new ViesWebService.checkVatResponse_element();
            	if (countryCode == 'GB' && vatNumber == '123456789')
            	{
            		response_x.valid = true;
            	}
            	else if (countryCode == 'GB' && vatNumber == '000000000')
            	{
            		response_x.valid = false;
            	}
             	else if (countryCode == 'XX')
            	{
            		throw new testException('INVALID_INPUT');
            	}
            	else
            	{
            		throw new testException('SERVICE_UNAVAILABLE');
            	}
            }
            else
            {
            	WebServiceCallout.invoke(
	              this,
    	          request_x,
        	      response_map_x,
            	  new String[]{endpoint_x,
	              '',
    	          'urn:ec.europa.eu:taxud:vies:services:checkVat:types',
        	      'checkVat',
            	  'urn:ec.europa.eu:taxud:vies:services:checkVat:types',
	              'checkVatResponse',
    	          'ViesWebService.checkVatResponse_element'}
        	    );
            	response_x = response_map_x.get('response_x');
            }
            return response_x;
        }
    }
    public class checkVatResponse_element {
        public String countryCode;
        public String vatNumber;
        public Date requestDate;
        public Boolean valid;
        public String name;
        public String address;
        private String[] countryCode_type_info = new String[]{'countryCode','http://www.w3.org/2001/XMLSchema','string','1','1','false'};
        private String[] vatNumber_type_info = new String[]{'vatNumber','http://www.w3.org/2001/XMLSchema','string','1','1','false'};
        private String[] requestDate_type_info = new String[]{'requestDate','http://www.w3.org/2001/XMLSchema','date','1','1','false'};
        private String[] valid_type_info = new String[]{'valid','http://www.w3.org/2001/XMLSchema','boolean','1','1','false'};
        private String[] name_type_info = new String[]{'name','http://www.w3.org/2001/XMLSchema','string','0','1','true'};
        private String[] address_type_info = new String[]{'address','http://www.w3.org/2001/XMLSchema','string','0','1','true'};
        private String[] apex_schema_type_info = new String[]{'urn:ec.europa.eu:taxud:vies:services:checkVat:types','true','true'};
        private String[] field_order_type_info = new String[]{'countryCode','vatNumber','requestDate','valid','name','address'};
    }
    public class checkVat_element {
        public String countryCode;
        public String vatNumber;
        private String[] countryCode_type_info = new String[]{'countryCode','http://www.w3.org/2001/XMLSchema','string','1','1','false'};
        private String[] vatNumber_type_info = new String[]{'vatNumber','http://www.w3.org/2001/XMLSchema','string','1','1','false'};
        private String[] apex_schema_type_info = new String[]{'urn:ec.europa.eu:taxud:vies:services:checkVat:types','true','true'};
        private String[] field_order_type_info = new String[]{'countryCode','vatNumber'};
    }
    // Added to provide test coverage - MPK
    public class testException extends Exception {}
}